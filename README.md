# React Router Delivery Hub

## Requirement

**Package manager**: [Bun](https://bun.sh/docs) > v1.2.0

**Runtime**: [Node.js](https://nodejs.org/en) >= v20.0

## Quick Start

Install the dependencies:

```bash
bun  install
```

Set the environment variables:

```bash
cp  .env.example  .env

# open .env and modify the environment variables (if needed)
```

Run development environment:

```bash
bun  run  dev
```

Build and run production environment:

```bash
bun  run  build

bun  run  start
```

## Table of Contents

- [Features](#features)
- [Commands](#commands)
- [Environment Variables](#environment-variables)
- [Project Structure](#project-structure)
- [Error Handling](#error-handling)
- [Validation](#validation)
- [Authentication](#authentication)
- [Linting](#linting)

## Features

- **Bundler**: using [Vite](https://vite.dev/)

- **Styling & accessibility**: using [shadcn/ui](https://ui.shadcn.com/docs)

- **Authentication and authorization**: custom using JWT accessToken and refreshToken

- **Client State Management**: using [Zustand](https://zustand.docs.pmnd.rs/getting-started/introduction)

- **Server State Management**: using [Tanstack Query](https://tanstack.com/query/latest)

- **Rest API Call**: using [axios](https://axios-http.com/docs/intro) and [axios]()

- **Validation**: form validation & API response validation using [Valibot](https://valibot.dev/)

- **Testing**: unit tests using [Playwright](https://playwright.dev/)

- **Error handling**: centralized error handling mechanism
-
- **Docker support???**

- **Git hooks**: with [husky](https://github.com/typicode/husky)

- **Linting**: with [Biome](https://biomejs.dev/)

## Commands

Running locally:

```bash
bun  run  dev
```

Running in production:

```bash
bun  run  build

bun  run  start
```

Testing:

```bash
# run all tests
bun  run  test.unit.run

# run test coverage
bun  run  test.unit.coverage
```

Linting:

```bash
# run conc lint
bun  run  lint

# run madge lint
bun  run  lint.circular

# run biome lint
bun  run  lint.biome

# run typescript type check
bun  run  lint.typecheck
```

## Environment Variables

The environment variables can be found and modified in the `.env` file. They come with these default values:

```bash
PORT=3000

NODE_ENV=development

VITE_ENV=development

VITE_BASE_API_URL=https://api.sampleapis.com

VITE_HOST=http://localhost:3000

VITE_COOKIE_DOMAIN=localhost

VITE_APP_VERSION=0.0.1

VITE_IS_E2E=0

```

## Project Structure

To be updated ...

```
src\
|--config\ # Environment variables and configuration related things
|--controllers\ # Route controllers (controller layer)
|--docs\ # Swagger files
|--middlewares\ # Custom express middlewares
|--models\ # Mongoose models (data layer)
|--routes\ # Routes
|--services\ # Business logic (service layer)
|--utils\ # Utility classes and functions
|--validations\ # Request data validation schemas
|--app.js # Express app
|--index.js # App entry point
```

## Error Handling

To be updated

## Validation

To be updated

## Authentication

**Generating Access Tokens**:

To be updated

An access token can be generated by making a successful call to the register (`POST /v1/auth/register`) or login (`POST /v1/auth/login`) endpoints. The response of these endpoints also contains refresh tokens (explained below).

An access token is valid for 30 minutes. You can modify this expiration time by changing the `JWT_ACCESS_EXPIRATION_MINUTES` environment variable in the .env file.

**Refreshing Access Tokens**:

After the access token expires, a new access token can be generated, by making a call to the refresh token endpoint (`POST /v1/auth/refresh-tokens`) and sending along a valid refresh token in the request body. This call returns a new access token and a new refresh token.

A refresh token is valid for 30 days. You can modify this expiration time by changing the `JWT_REFRESH_EXPIRATION_DAYS` environment variable in the .env file.

## Linting

Linting is done using [ESLint](https://eslint.org/) and [Prettier](https://prettier.io).

In this app, ESLint is configured to follow the [Airbnb JavaScript style guide](https://github.com/airbnb/javascript/tree/master/packages/eslint-config-airbnb-base) with some modifications. It also extends [eslint-config-prettier](https://github.com/prettier/eslint-config-prettier) to turn off all rules that are unnecessary or might conflict with Prettier.

To modify the ESLint configuration, update the `.eslintrc.json` file. To modify the Prettier configuration, update the `.prettierrc.json` file.

To prevent a certain file or directory from being linted, add it to `.eslintignore` and `.prettierignore`.

To maintain a consistent coding style across different IDEs, the project contains `.editorconfig`

### Tech stack

- Bundler: Vite

- Integrate with API: [Tanstack Query](https://tanstack.com/query/latest/docs/framework/react/overview) + [Ky](https://github.com/sindresorhus/ky)

- Validation: Use [Valibot](https://github.com/fabian-hiller/valibot) for validate all the form, schema and whatever we need to validate!

### Developer Experiences

- Use `techvify` CLI write in RUST to automate all the tasks we needs in this project

- Use Git Workflow + Semantic commit + AI to have great commit + review code!

- Spell checker will notified once there had typos

- Have a lot of utilities collections like `react-use` and `@techvify/es-toolkit` for handling/transforming data

- Testing - All feature have Unit + e2e testing(mocking DB)

- Code Snippets say goodbye to the boilerplate
